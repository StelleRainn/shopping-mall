(function(){"use strict";var t={1176:function(t,e,s){s.d(e,{Dh:function(){return c},JK:function(){return r},Vp:function(){return o},x1:function(){return n}});const a="StelleRainn-shopping-info",i="StelleRainn-shopping-history",o=()=>{const t={userId:"",token:""},e=localStorage.getItem(a);return e?JSON.parse(e):t},n=t=>{localStorage.setItem(a,JSON.stringify(t))},r=()=>{const t=localStorage.getItem(i);return t?JSON.parse(t):[]},c=t=>{localStorage.setItem(i,JSON.stringify(t))}},4857:function(t,e,s){s.d(e,{A:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"count-box"},[e("button",{staticClass:"minus",on:{click:function(e){return t.changeConsumeCount(-1)}}},[t._v("-")]),e("input",{staticClass:"inp",attrs:{type:"text"},domProps:{value:t.value},on:{change:t.handleChange}}),e("button",{staticClass:"add",on:{click:function(e){return t.changeConsumeCount(1)}}},[t._v("+")])])},i=[],o={name:"CountBox",props:{value:{type:Number,default:1}},methods:{changeConsumeCount(t){1===t?this.$emit("input",this.value+1):this.value>1&&this.$emit("input",this.value-1)},handleChange(t){const e=Number(t.target.value);Number.isInteger(e)&&e>=1?this.$emit("input",e):t.target.value=this.value}}},n=o,r=s(1656),c=(0,r.A)(n,a,i,!1,null,"628db84c",null),d=c.exports},5389:function(t,e,s){var a=s(2856),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},o=[],n={name:"App",data(){return{}}},r=n,c=s(1656),d=(0,c.A)(r,i,o,!1,null,null,null),l=d.exports,u=s(1594),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("van-nav-bar",{attrs:{title:"会员登录","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"form"},[e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"}],staticClass:"inp",attrs:{maxlength:"11",placeholder:"请输入手机号码",type:"text"},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})]),e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.validCode,expression:"validCode"}],staticClass:"inp",attrs:{maxlength:"5",placeholder:"请输入图形验证码",type:"text"},domProps:{value:t.validCode},on:{input:function(e){e.target.composing||(t.validCode=e.target.value)}}}),t.validCodeImg?e("img",{attrs:{src:t.validCodeImg,alt:""},on:{click:t.getCode}}):t._e()]),e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"inp",attrs:{placeholder:"请输入短信验证码",type:"text"},domProps:{value:t.smsCode},on:{input:function(e){e.target.composing||(t.smsCode=e.target.value)}}}),e("button",{on:{click:t.getSMSCode}},[t._v(" "+t._s(t.remainingTime===t.waitTime?"获取验证码":t.remainingTime+1+"秒后重新获取验证码")+" ")])])]),e("div",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")])])],1)},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("h3",[t._v("手机号登录")]),e("p",[t._v("未注册的手机号登录后将自动注册")])])}],h=(s(9235),s(2455)),v=s(7120);const g=()=>v.A.get("captcha/image"),f=(t,e,s)=>v.A.post("captcha/sendSmsCaptcha",{form:{captchaCode:t,captchaKey:e,mobile:s}}),C=(t,e)=>v.A.post("/passport/login",{form:{isParty:!1,partyData:{},mobile:t,smsCode:e}});var _={name:"LoginPage",data(){return{validCode:"",validCodeKey:"",validCodeImg:"",timer:null,waitTime:60,remainingTime:60,telephone:"",smsCode:""}},async created(){await this.getCode()},methods:{async getCode(){const t=await g(),{data:{base64:e,key:s}}=t.data;this.validCodeKey=s,this.validCodeImg=e,(0,h.A)("按需导入，四处可用"),this.$toast("挂载到了Vue的原型链上")},validationFn(){return/^1[3-9]\d{9}$/.test(this.telephone)?!!/^\w{4}$/.test(this.validCode)||(this.$toast("人机验证码有误"),!1):(this.$toast("请输入正确的手机号"),!1)},async getSMSCode(){this.validationFn()&&(this.time||this.remainingTime!==this.waitTime||(await f(this.validCode,this.validCodeKey,this.telephone),this.$toast.success("短信验证码发送成功"),this.timer=setInterval(()=>{this.remainingTime--,this.remainingTime<0&&(clearInterval(this.timer),this.remainingTime=this.waitTime)},1e3)))},async login(){if(!this.validationFn())return;/^\d{6}$/.test(this.smsCode)||this.$toast("验证码有误");const t=await C(this.telephone,this.smsCode);this.$toast("登录成功"),this.$store.commit("user/setUserInfo",t.data.data);const e=this.$route.query.backUrl||"/home";this.$router.replace({path:e})}},destroyed(){clearInterval(this.timer)}},y=_,A=(0,c.A)(y,m,p,!1,null,"56d92a1c",null),k=A.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{title:"商品搜索","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",clearable:""},scopedSlots:t._u([{key:"action",fn:function(){return[e("div",{on:{click:function(e){return t.goSearch(t.searchValue)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t.history.length?e("div",{staticClass:"search-history"},[e("div",{staticClass:"title"},[e("span",[t._v("最近搜索")]),e("van-icon",{attrs:{name:"delete-o",size:"16"},on:{click:t.deleteHistory}})],1),e("div",{staticClass:"list"},t._l(t.history,function(s,a){return e("div",{key:a,staticClass:"list-item",on:{click:function(e){return t.goSearch(s)}}},[t._v(" "+t._s(s)+" ")])}),0)]):t._e()],1)},I=[],w=(s(4114),s(1176)),x={name:"SearchIndex",data(){return{history:(0,w.JK)(),searchValue:""}},methods:{goSearch(t){const e=this.history.indexOf(t);-1!==e&&this.history.splice(e,1),this.history.unshift(t),(0,w.Dh)(this.history),this.$router.push(`./search-list?search=${t}`)},deleteHistory(){this.history=[],(0,w.Dh)([])}}},S=x,T=(0,c.A)(S,b,I,!1,null,"28066900",null),L=T.exports,P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.searchQuery||"搜索商品","show-action":""},on:{click:function(e){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[e("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),t._m(0),e("div",{staticClass:"goods-list"},t._l(t.proList,function(t){return e("GoodsItem",{key:t.goods_id,attrs:{item:t}})}),1)],1)},N=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"sort-btns"},[e("div",{staticClass:"sort-item"},[t._v("综合")]),e("div",{staticClass:"sort-item"},[t._v("销量")]),e("div",{staticClass:"sort-item"},[t._v("价格 ")])])}];const E=t=>{const{categoryId:e,goodsName:s,page:a}=t,i=v.A.get("goods/list",{params:{categoryId:e,goodsName:s,page:a}});return i},$=t=>v.A.get("goods/detail",{params:{goodsId:t}}),O=(t,e)=>v.A.get("comment/listRows",{params:{goodsId:t,limit:e}});var B=s(6216),K={name:"SearchIndex",components:{GoodsItem:B.A},computed:{searchQuery(){return this.$route.query.search},categoryId(){return this.$route.query.categoryId}},data(){return{page:1,proList:[]}},async created(){const t=await E({categoryId:this.categoryId,goodsName:this.searchQuery,page:this.page});this.proList=t.data.data.list.data}},j=K,F=(0,c.A)(j,P,N,!1,null,"243e7d65",null),q=F.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"prodetail"},[e("van-nav-bar",{attrs:{fixed:"",title:"商品详情页","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+" / "+t._s(t.images.length))])]},proxy:!0}])},t._l(t.detail.goods_images,function(t,s){return e("van-swipe-item",{key:s},[e("img",{attrs:{src:t.external_url}})])}),1),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(t.detail.goods_price_min))]),e("span",{staticClass:"oldprice"},[t._v("￥"+t._s(t.detail.goods_price_max))])]),e("div",{staticClass:"sellcount"},[t._v("已售"+t._s(t.detail.goods_sales)+"件")])]),e("div",{staticClass:"msg text-ellipsis-2"},[t._v(" "+t._s(t.detail.goods_name)+" ")]),e("div",{staticClass:"service"},[e("div",{staticClass:"left-words"},[e("span",[e("van-icon",{attrs:{name:"passed"}}),t._v("七天无理由退货")],1),e("span",[e("van-icon",{attrs:{name:"passed"}}),t._v("48小时发货")],1)]),e("div",{staticClass:"right-icon"},[e("van-icon",{attrs:{name:"arrow"}})],1)])]),e("div",{staticClass:"comment"},[e("div",{staticClass:"comment-title"},[e("div",{staticClass:"left"},[t._v("商品评价 ("+t._s(t.commentCount)+" 条)")]),e("div",{staticClass:"right"},[t._v("查看更多 "),e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"comment-list"},t._l(t.commentList,function(s){return e("div",{key:s.comment_id,staticClass:"comment-item"},[e("div",{staticClass:"top"},[e("img",{attrs:{src:s.user.avatar||t.defaultAvatar,alt:""}}),e("div",{staticClass:"name"},[t._v(t._s(s.user.nick_name))]),e("van-rate",{attrs:{size:16,value:s.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"}})],1),e("div",{staticClass:"content"},[t._v(" "+t._s(s.content)+" ")]),e("div",{staticClass:"time"},[t._v(" "+t._s(s.creat_time)+" ")])])}),0)]),e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.detail.content)}}),e("div",{staticClass:"footer"},[e("div",{staticClass:"icon-home",on:{click:function(e){return t.$router.push("/home")}}},[e("van-icon",{attrs:{name:"wap-home-o"}}),e("span",[t._v("首页")])],1),e("div",{staticClass:"icon-cart",on:{click:function(e){return t.$router.push("/cart")}}},[t.cartTotal>0?e("span",{staticClass:"num"},[t._v(t._s(t.cartTotal))]):t._e(),e("van-icon",{attrs:{name:"shopping-cart-o"}}),e("span",[t._v("购物车")])],1),e("div",{staticClass:"btn-add",on:{click:t.addToCart}},[t._v("加入购物车")]),e("div",{staticClass:"btn-buy",on:{click:t.purchase}},[t._v("立刻购买")])]),e("van-action-sheet",{attrs:{title:"cart"===t.mode?"加入购物车":"立刻购买"},model:{value:t.showPannel,callback:function(e){t.showPannel=e},expression:"showPannel"}},[e("div",{staticClass:"product"},[e("div",{staticClass:"product-title"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.detail.goods_image,alt:""}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"price"},[e("span",[t._v("¥")]),e("span",{staticClass:"nowprice"},[t._v(t._s(t.detail.goods_price_min))])]),e("div",{staticClass:"count"},[e("span",[t._v("库存")]),e("span",[t._v(t._s(t.detail.stock_total))])])])]),e("div",{staticClass:"num-box"},[e("span",[t._v("数量")]),e("CountBox",{attrs:{value:t.consumeCount},on:{input:t.changeConsumeCount}})],1),t.detail.stock_total?e("div",{staticClass:"showbtn"},["cart"===t.mode?e("div",{staticClass:"btn",on:{click:t.confirmAddToCart}},[t._v("加入购物车")]):e("div",{staticClass:"btn now",on:{click:t.goBuyNow}},[t._v("立刻购买")])]):e("div",{staticClass:"btn-none"},[t._v("该商品已抢完")])])])],1)},U=[],J=s(7767),R=s(4857),M=s(6092),V={methods:{checkTokenStatus(){const t=this.$store.state.user.userInfo.token;return!t&&(this.$dialog.confirm({title:"温馨提示",message:"需要先登录才能继续哦",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then(()=>{this.$router.replace({path:"/login",query:{backUrl:this.$route.fullPath}})}).catch(()=>{this.$dialog.close()}),!0)}}},G={name:"ProDetailIndex",components:{CountBox:R.A},mixins:[V],data(){return{images:["https://img01.yzcdn.cn/vant/apple-1.jpg","https://img01.yzcdn.cn/vant/apple-2.jpg"],current:0,detail:{},commentList:[],commentCount:0,defaultAvatar:J,showPannel:!1,mode:"cart",consumeCount:1,cartTotal:0}},computed:{goodsId(){return this.$route.params.id}},methods:{onChange(t){this.current=t},async getGoodsDetail(){const t=await $(this.goodsId);this.detail=t.data.data.detail},async getGoodsComments(){const t=await O(this.goodsId,3);this.commentList=t.data.data.list,this.commentCount=t.data.data.total},addToCart(){this.mode="cart",this.showPannel=!0},purchase(){this.mode="purchase",this.showPannel=!0},changeConsumeCount(t){this.consumeCount=t},async confirmAddToCart(){if(this.checkTokenStatus())return;const t=await(0,M.zT)(this.goodsId,this.consumeCount,this.detail.skuList[0].goods_sku_id);this.cartTotal=t.data.data.cartTotal,this.$toast(t.data.message),this.showPannel=!1},goBuyNow(){this.checkTokenStatus()||this.$router.push({path:"/pay",query:{mode:"buyNow",goodsId:this.goodsId,goodsSkuId:this.detail.skuList[0].goods_sku_id,goodsNum:this.consumeCount}})}},created(){this.getGoodsDetail(),this.getGoodsComments()}},z=G,Z=(0,c.A)(z,D,U,!1,null,"2c65bdd3",null),H=Z.exports,Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pay"},[e("van-nav-bar",{attrs:{fixed:"",title:"订单结算台","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"address"},[e("div",{staticClass:"left-icon"},[e("van-icon",{attrs:{name:"logistics"}})],1),e("div",{staticClass:"info"},[e("div",{staticClass:"info-content"},[e("span",{staticClass:"name"},[t._v(t._s(t.selectedAddress.name))]),e("span",{staticClass:"mobile"},[t._v(" "+t._s(t.selectedAddress.phone))])]),e("div",{staticClass:"info-address"},[t._v(" "+t._s(t.selectedAddressLong)+" ")])]),e("div",{staticClass:"right-icon"},[e("van-icon",{attrs:{name:"arrow"}})],1)]),t.order.goodsList?e("div",{staticClass:"pay-list"},[e("div",{staticClass:"list"},t._l(t.order.goodsList,function(s){return e("div",{key:s.goods_id,staticClass:"goods-item"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:s.goods_image,alt:""}})]),e("div",{staticClass:"right"},[e("p",{staticClass:"tit text-ellipsis-2"},[t._v(" "+t._s(s.goods_name)+" ")]),e("p",{staticClass:"info"},[e("span",{staticClass:"count"},[t._v("x"+t._s(s.total_num))]),e("span",{staticClass:"price"},[t._v("¥"+t._s(s.total_pay_price))])])])])}),0),e("div",{staticClass:"flow-num-box"},[e("span",[t._v("共 "+t._s(t.order.orderTotalNum)+" 件商品，合计：")]),e("span",{staticClass:"money"},[t._v("￥"+t._s(t.order.orderTotalPrice))])]),e("div",{staticClass:"pay-detail"},[e("div",{staticClass:"pay-cell"},[e("span",[t._v("订单总金额：")]),e("span",{staticClass:"red"},[t._v("￥"+t._s(t.order.orderTotalPrice))])]),t._m(0),e("div",{staticClass:"pay-cell"},[e("span",[t._v("配送费用：")]),t.selectedAddress?e("span",{staticClass:"red"},[t._v("+￥0.00")]):e("span",[t._v("请先选择配送地址")])])]),e("div",{staticClass:"pay-way"},[e("span",{staticClass:"tit"},[t._v("支付方式")]),e("div",{staticClass:"pay-cell"},[e("span",[e("van-icon",{attrs:{name:"balance-o"}}),t._v("余额支付（可用 ¥ "+t._s(t.personal.balance)+" 元）")],1),e("span",{staticClass:"red"},[e("van-icon",{attrs:{name:"passed"}})],1)])]),e("div",{staticClass:"buytips"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"选填：买家留言（50字内）",name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])]):t._e(),e("div",{staticClass:"footer-fixed"},[e("div",{staticClass:"left"},[t._v("实付款："),e("span",[t._v("￥"+t._s(t.order.orderTotalPrice))])]),e("div",{staticClass:"tipsbtn",on:{click:t.submitOrder}},[t._v("提交订单")])])],1)},W=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"pay-cell"},[e("span",[t._v("优惠券：")]),e("span",[t._v("无优惠券可用")])])}];const Y=()=>v.A.get("address/list"),X=()=>v.A.post("address/add",{form:{name:"RosaTest-"+String((10*Math.random()).toFixed(2)),phone:"13172207113",region:[{value:782,label:"上海"},{value:783,label:"上海市"},{value:785,label:"徐汇区"}],detail:"北京路1号楼8888室"}}),tt=(t,e)=>v.A.get("checkout/order",{params:{mode:t,delivery:10,shopId:0,couponId:0,...e}}),et=(t,e)=>v.A.post("checkout/submit",{mode:t,delivery:10,couponId:0,isUsePoints:0,payType:10,...e}),st=(t,e)=>v.A.get("/order/list",{params:{dataType:t,page:e}});var at={name:"PayIndex",data(){return{addressList:[],order:{},personal:{},remark:""}},created(){this.setDeafaultAddress(),this.getAddressList(),this.getOrderList()},computed:{selectedAddress(){return this.addressList[0]},selectedAddressLong(){const t=this.selectedAddress.region;return t.province+t.city+t.region+this.selectedAddress.detail},mode(){return this.$route.query.mode},cartIds(){return this.$route.query.cartIds},goodsId(){return this.$route.query.goodsId},goodsNum(){return this.$route.query.goodsNum},goodsSkuId(){return this.$route.query.goodsSkuId}},methods:{async setDeafaultAddress(){const t=await X();console.log(t)},async getAddressList(){const t=await Y();this.addressList=t.data.data.list},async getOrderList(){if("cart"===this.mode){const t=await tt(this.mode,{cartIds:this.cartIds});this.order=t.data.data.order,this.personal=t.data.data.personal}if("buyNow"===this.mode){const t=await tt(this.mode,{goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId});this.order=t.data.data.order,this.personal=t.data.data.personal}},async submitOrder(){console.log("submitting"),"cart"===this.mode&&await et(this.mode,{cartIds:this.cartIds,remark:this.remark}),"buyNow"===this.mode&&await et(this.mode,{goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId,remark:this.remark}),this.$toast.success("支付成功"),this.$router.replace("/myorder")}}},it=at,ot=(0,c.A)(it,Q,W,!1,null,"b47415dc",null),nt=ot.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"我的订单","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tab",{attrs:{name:"all",title:"全部"}}),e("van-tab",{attrs:{name:"payment",title:"待支付"}}),e("van-tab",{attrs:{name:"delivery",title:"待发货"}}),e("van-tab",{attrs:{name:"received",title:"待收货"}}),e("van-tab",{attrs:{name:"comment",title:"待评价"}})],1),t._l(t.list,function(t){return e("OrderListItem",{key:t.order_id,attrs:{item:t}})})],2)},ct=[],dt=(s(8111),s(7588),function(){var t=this,e=t._self._c;return t.item.order_id?e("div",{staticClass:"order-list-item"},[e("div",{staticClass:"tit"},[e("div",{staticClass:"time"},[t._v(t._s(t.item.create_time))]),e("div",{staticClass:"status"},[e("span",[t._v(t._s(t.item.state_text))])])]),e("div",{staticClass:"list"},t._l(t.item.goods,function(s,a){return e("div",{key:a,staticClass:"list-item"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:s.goods_image,alt:""}})]),e("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(s.goods_name)+" ")]),e("div",{staticClass:"goods-trade"},[e("p",[t._v("¥ "+t._s(s.total_pay_price))]),e("p",[t._v("x "+t._s(s.total_num))])])])}),0),e("div",{staticClass:"total"},[t._v(" 共 "+t._s(t.item.total_num)+" 件商品，总金额 ¥"+t._s(t.item.total_price)+" ")]),e("div",{staticClass:"actions"},[10===t.item.order_status?e("div",[10===t.item.pay_status?e("span",[t._v("立刻付款")]):10===t.item.delivery_status?e("span",[t._v("申请取消")]):20===t.item.delivery_status||30===t.item.delivery_status?e("span",[t._v("确认收货")]):t._e()]):t._e(),30===t.item.order_status?e("div",[e("span",[t._v("评价")])]):t._e()])]):t._e()}),lt=[],ut={props:{item:{type:Object,default:()=>({})}}},mt=ut,pt=(0,c.A)(mt,dt,lt,!1,null,"cbb7a4a6",null),ht=pt.exports,vt={name:"OrderPage",components:{OrderListItem:ht},data(){return{active:this.$route.query.dataType||"all",page:1,list:[]}},methods:{async getOrderList(){const{data:{data:{list:t}}}=await st(this.active,this.page);t.data.forEach(t=>{t.total_num=0,t.goods.forEach(e=>{t.total_num+=e.total_num})}),this.list=t.data}},watch:{active:{immediate:!0,handler(){this.getOrderList()}}}},gt=vt,ft=(0,c.A)(gt,rt,ct,!1,null,"676df150",null),Ct=ft.exports,_t=s(8414);const yt=()=>s.e(228).then(s.bind(s,8228)),At=()=>s.e(838).then(s.bind(s,4838)),kt=()=>s.e(710).then(s.bind(s,4710)),bt=()=>s.e(467).then(s.bind(s,467)),It=()=>s.e(900).then(s.bind(s,6900));a.Ay.use(u.Ay);const wt=[{path:"/login",component:k},{path:"/",component:yt,redirect:"/home",children:[{path:"/home",component:At},{path:"/category",component:kt},{path:"/cart",component:bt},{path:"/user",component:It}]},{path:"/search",component:L},{path:"/search-list",component:q},{path:"/pro-detail/:id",component:H},{path:"/pay",component:nt},{path:"/myorder",component:Ct}],xt=new u.Ay({routes:wt}),St=["/pay","/order"];xt.beforeEach((t,e,s)=>{St.includes(t.path)?_t.A.state.user.userInfo.token?s():s("/login"):s()});var Tt=xt,Lt=(s(2531),s(2252)),Pt=(s(8883),s(9434)),Nt=(s(3707),s(1680)),Et=(s(9739),s(1673)),$t=(s(4752),s(800)),Ot=(s(8772),s(8482)),Bt=(s(3584),s(8031)),Kt=(s(7790),s(4545)),jt=(s(8820),s(7691)),Ft=(s(5338),s(9941)),qt=(s(4130),s(8101)),Dt=(s(2237),s(6144)),Ut=(s(5300),s(8507)),Jt=(s(3482),s(9733)),Rt=(s(3930),s(9813)),Mt=(s(1388),s(8139)),Vt=(s(9293),s(731));a.Ay.use(Vt.A),a.Ay.use(Mt.A),a.Ay.use(Rt.A),a.Ay.use(Ut.A).use(Jt.A),a.Ay.use(Dt.A),a.Ay.use(h.A),a.Ay.use(qt.A),a.Ay.use(jt.A).use(Ft.A),a.Ay.use(Bt.A).use(Kt.A),a.Ay.use(Ot.A),a.Ay.use($t.A),a.Ay.use(Et.A),a.Ay.use(Nt.A),a.Ay.use(Lt.A).use(Pt.A),a.Ay.config.productionTip=!1,new a.Ay({router:Tt,store:_t.A,render:t=>t(l)}).$mount("#app")},6092:function(t,e,s){s.d(e,{BB:function(){return o},Jr:function(){return r},dS:function(){return n},zT:function(){return i}});var a=s(7120);const i=(t,e,s)=>a.A.post("cart/add",{goodsId:t,goodsNum:e,goodsSkuId:s}),o=()=>a.A.get("cart/list"),n=(t,e,s)=>a.A.post("cart/update",{goodsId:t,goodsNum:e,goodsSkuId:s}),r=t=>a.A.post("cart/clear",{cartIds:t})},6216:function(t,e,s){s.d(e,{A:function(){return d}});s(4114);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-item",on:{click:function(e){return t.$router.push(`/pro-detail/${t.item.goods_id}`)}}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.item.goods_image,alt:""}})]),e("div",{staticClass:"right"},[e("p",{staticClass:"tit text-ellipsis-2"},[t._v(" "+t._s(t.item.goods_name)+" ")]),e("p",{staticClass:"count"},[t._v("已售"+t._s(t.item.goods_sales)+"件")]),e("p",{staticClass:"price"},[e("span",{staticClass:"new"},[t._v("¥"+t._s(t.item.line_price_min))]),e("span",{staticClass:"old"},[t._v("¥"+t._s(t.item.line_price_max))])])])])},i=[],o={name:"GoodsItem",props:{item:{type:Object,default:()=>({})}}},n=o,r=s(1656),c=(0,r.A)(n,a,i,!1,null,"bcd21a74",null),d=c.exports},7120:function(t,e,s){s(9235);var a=s(2455),i=s(417),o=s(8414);const n=i.A.create({baseURL:"https://smart-shop.itheima.net/index.php?s=/api",timeout:5e3,headers:{platform:"H5"}});n.interceptors.request.use(function(t){return a.A.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),t.headers["Access-Token"]=o.A.state.user.userInfo.token,t},function(t){return Promise.reject(t)}),n.interceptors.response.use(function(t){const e=t.data;return 200!==e.status?((0,a.A)(e.message),Promise.reject(e.message)):(a.A.clear(),t)},function(t){return Promise.reject(t)}),e.A=n},7767:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkBAMAAACCzIhnAAAAKlBMVEXp6en////9/f3o6Ojw8PDj4+Pl5eXh4eHs7Oz7+/v09PTy8vL4+Pj29vY+GdZKAAADDElEQVRYw+3Wv0sbYRjA8ZNwp+Li89YhUQO+b6F0PDTx6NBBtHXpcBDPRkvhakiC1CGghqIIyRCdOqQlHdouUoqlm1Co0KUZhK4tFPvn9MnF5n6+P4R2KT6EhJe8n3y5ewOJduXJXZNr8l+Tecd5uFu6CinbS18+LR06pjJxxl4ATuZD2anMaXMKxHkOl/P6LFVxCnJi3YXAvP34zZWR1A6E54aUVI8j5J4mIcZBRExLr8WKRk5cGdmHyFyYEqI3o2SqJiH5NkRHl5B9iE3HFBJjI07StpDoC3Ey7QrJfBviYwiJCwmzLCQ7SeRCSNaTyEtTQFKbSSTtishsIrEFxBi6Jn+FFAWk+iSR1PnEyHWTSObM5pJSG5KnxSWPgDMdk0ce88gMl6zzyE0uWRnsoWFyziUubiWMAiMM8AmdtwT4zL38fJcxRnAXw6EI+0sGBpfoTUJIbxfF6ZnL5aTNP/0DklSht1w+KVFK4xVY1vjkqEkSKtltAdH2IF6Bjisi1vd4BfSGiByukWiFjtvi35dKO1qBI01M8AZEKtmahKQ2wxVK07aEaCuRCj3XZKTSDl8L6FIyPESCFZisSYm2F76Wjisn5TZlgYrekJPWLPErdKKm8kfxGfgVODFVyHATBpXJbU2FpDYGdwzGi2rkzqBC064a2fIrSP5VZTZQsZVIa8i/Y1M1JTJ86p9LZrWhdpSB01c6SqtJ/ApM1RtSYmDErzB4b0uJc0qYXyEsUzUlpDoKNFgh9LZjCkn1KTAWqhD4umvyScrJUULDFTTvsMMhxu4YimiFUfhVLSSTvPsAUMQqhMKbw0ICGckXf3giVsEHZO6vxsiIVewC7kqsUAZksR4lerENjPAquCCLhTAxtrv4Lr+CT6Rlh4hzCpSKKozQrGUGiDUKjIkrjMBEvTEg+FXsfyJWiLfRm96LV+unGPy0B6R83NuI73qAeKq/9h4epjgZ6w/Rt8Db2EeBCq4DFdQztUuy2mWKA0d9oq8RVULTNY+UMaKcyfdIao+oE/rKRqIvsCtMtpT7DVEPKD7Ga13IAAAAAElFTkSuQmCC"},8414:function(t,e,s){s.d(e,{A:function(){return h}});var a=s(2856),i=s(1910),o=s(1176);const n={userInfo:(0,o.Vp)()},r={setUserInfo(t,e){t.userInfo=e,(0,o.x1)(e)}},c={logoutActions(t){t.commit("setUserInfo",[]),t.commit("cart/updateCartList",{},{root:!0})}},d={};var l={namespaced:!0,state:n,mutations:r,actions:c,getters:d},u=(s(9235),s(2455)),m=(s(8111),s(1148),s(2489),s(116),s(7588),s(1701),s(8237),s(6092)),p={namespaced:!0,state(){return{cartList:[]}},mutations:{updateCartList(t,e){t.cartList=e},toggleChecked(t,e){const s=t.cartList.find(t=>t.goods_id===e);s&&(s.isChecked=!s.isChecked)},toggleAllChecked(t,e){t.cartList.forEach(t=>{t.isChecked=e})},syncUpdatedCount(t,e){const{goodsId:s,goodsNum:a}=e;console.log(s,a);const i=t.cartList.find(t=>t.goods_id===s);i&&(i.goods_num=a)}},actions:{async fetchCartList(t){const e=await(0,m.BB)(),s=e.data.data.list;s.forEach(t=>{t.isChecked=!0}),t.commit("updateCartList",s)},async updateCount(t,e){const{goodsId:s,goodsNum:a,goodsSkuId:i}=e;await(0,m.dS)(s,a,i),t.commit("syncUpdatedCount",{goodsId:s,goodsNum:a})},async delSelItem(t){const e=t.getters.selCartList.map(t=>t.id);await(0,m.Jr)(e),(0,u.A)("删除成功"),t.dispatch("fetchCartList")}},getters:{cartTotal:t=>t.cartList.reduce((t,e)=>t+e.goods_num,0),selCartList:t=>t.cartList.filter(t=>t.isChecked),selCount:(t,e)=>e.selCartList.reduce((t,e)=>t+e.goods_num,0),selPriceInTotal:(t,e)=>e.selCartList.reduce((t,e)=>t+e.goods_num*e.goods.goods_price_min,0).toFixed(2),isAllChecked:t=>t.cartList.every(t=>t.isChecked)}};a.Ay.use(i.Ay);var h=new i.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{user:l,cart:p}})}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,o){if(!a){var n=1/0;for(l=0;l<t.length;l++){a=t[l][0],i=t[l][1],o=t[l][2];for(var r=!0,c=0;c<a.length;c++)(!1&o||n>=o)&&Object.keys(s.O).every(function(t){return s.O[t](a[c])})?a.splice(c--,1):(r=!1,o<n&&(n=o));if(r){t.splice(l--,1);var d=i();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[a,i,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce(function(e,a){return s.f[a](t,e),e},[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{228:"c33bdd95",467:"9fe55fed",710:"a8ead52a",838:"ff4f21d1",900:"a9b20746"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{467:"732c6bcf",710:"c9c15625",838:"7caed5ae",900:"b1f6a146"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="endings-vue2-shopping:";s.l=function(a,i,o,n){if(t[a])t[a].push(i);else{var r,c;if(void 0!==o)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+o){r=u;break}}r||(c=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",e+o),r.src=a),t[a]=[i];var m=function(e,s){r.onerror=r.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach(function(t){return t(s)}),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),c&&document.head.appendChild(r)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/shopping-mall-vue2-demo/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,i,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",s.nc&&(n.nonce=s.nc);var r=function(s){if(n.onerror=n.onload=null,"load"===s.type)i();else{var a=s&&s.type,r=s&&s.target&&s.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+a+": "+r+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=r,n.parentNode&&n.parentNode.removeChild(n),o(c)}};return n.onerror=n.onload=r,n.href=e,a?a.parentNode.insertBefore(n,a.nextSibling):document.head.appendChild(n),n},e=function(t,e){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===t||o===e))return i}var n=document.getElementsByTagName("style");for(a=0;a<n.length;a++){i=n[a],o=i.getAttribute("data-href");if(o===t||o===e)return i}},a=function(a){return new Promise(function(i,o){var n=s.miniCssF(a),r=s.p+n;if(e(n,r))return i();t(a,r,null,i,o)})},i={524:0};s.f.miniCss=function(t,e){var s={467:1,710:1,838:1,900:1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=a(t).then(function(){i[t]=0},function(e){throw delete i[t],e}))}}}(),function(){var t={524:0};s.f.j=function(e,a){var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise(function(s,a){i=t[e]=[s,a]});a.push(i[2]=o);var n=s.p+s.u(e),r=new Error,c=function(a){if(s.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;r.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",r.name="ChunkLoadError",r.type=o,r.request=n,i[1](r)}};s.l(n,c,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,n=a[0],r=a[1],c=a[2],d=0;if(n.some(function(e){return 0!==t[e]})){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var l=c(s)}for(e&&e(a);d<n.length;d++)o=n[d],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(l)},a=self["webpackChunkendings_vue2_shopping"]=self["webpackChunkendings_vue2_shopping"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(5389)});a=s.O(a)})();
//# sourceMappingURL=app.d08c9670.js.map